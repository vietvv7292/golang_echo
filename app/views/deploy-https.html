{{ template "header.html" . }}

<h1 class="text-3xl font-bold text-green-700 mb-4">🚀 Triển khai ứng dụng Golang + Echo với HTTPS (Let's Encrypt - Certbot)</h1>

<p class="text-gray-700 mb-6">Tài liệu này hướng dẫn triển khai ứng dụng Golang sử dụng framework Echo, cài đặt SSL miễn phí với Let's Encrypt thông qua Certbot.</p>

<hr class="my-6">

<h2 class="text-2xl font-semibold text-gray-800 mb-4">🖥️ 1. Chuẩn bị server Ubuntu</h2>
<ul class="list-disc list-inside text-gray-700">
  <li>Server Ubuntu 20.04+ (VD: VPS DigitalOcean, Linode, v.v...)</li>
  <li>Truy cập SSH root hoặc user có quyền <code>sudo</code></li>
  <li>Domain/subdomain đã trỏ A record về IP server (VD: <code>golang.vuvanviet.com</code>)</li>
</ul>

<hr class="my-6">

<h2 class="text-2xl font-semibold text-gray-800 mb-4">📦 2. Build và chạy ứng dụng Golang</h2>
<pre class="bg-gray-100 p-4 rounded-md overflow-x-auto text-sm"><code># Dừng tiến trình cũ nếu có
pkill server

# Build lại nếu bạn có thay đổi code
go build -o server

# Chạy app ở port 8080 (hoặc port bạn cấu hình)
nohup ./server > log.txt &</code></pre>

<hr class="my-6">

<h2 class="text-2xl font-semibold text-gray-800 mb-4">🌐 3. Cài đặt Certbot và cấu hình HTTPS</h2>
<p>Chúng ta sẽ dùng Certbot để cấp chứng chỉ SSL từ Let's Encrypt, sau đó dùng <strong>Nginx làm reverse proxy</strong>.</p>

<h3 class="text-xl font-semibold text-gray-700 mt-4">🔧 Cài Nginx và Certbot</h3>
<pre class="bg-gray-100 p-4 rounded-md overflow-x-auto text-sm"><code>sudo apt update
sudo apt install nginx certbot python3-certbot-nginx -y
</code></pre>

<h3 class="text-xl font-semibold text-gray-700 mt-4">🧩 Cấu hình Nginx cho app</h3>
<p>Tạo file cấu hình cho subdomain:</p>

<pre class="bg-gray-100 p-4 rounded-md overflow-x-auto text-sm"><code>sudo nano /etc/nginx/sites-available/golang</code></pre>

<pre class="bg-gray-100 p-4 rounded-md overflow-x-auto text-sm"><code>server {
    listen 80;
    server_name golang.vuvanviet.com;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}</code></pre>

<p>Tạo symlink và reload Nginx:</p>
<pre class="bg-gray-100 p-4 rounded-md overflow-x-auto text-sm"><code>sudo ln -s /etc/nginx/sites-available/golang /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx</code></pre>

<h3 class="text-xl font-semibold text-gray-700 mt-4">🔐 Cấp chứng chỉ SSL</h3>
<p>Dùng Certbot để tự động cấu hình HTTPS cho Nginx:</p>

<pre class="bg-gray-100 p-4 rounded-md overflow-x-auto text-sm"><code>sudo certbot --nginx -d golang.vuvanviet.com</code></pre>

<p>Nếu thành công, bạn sẽ thấy thông báo "Congratulations! Your certificate and chain have been saved...".</p>

<ul class="list-disc list-inside text-gray-700 mt-3">
  <li>SSL có hiệu lực 3 tháng (90 ngày)</li>
  <li>Certbot sẽ tự gia hạn bằng cron job (mặc định)</li>
</ul>

<hr class="my-6">

<h2 class="text-2xl font-semibold text-gray-800 mb-4">🛠 4. Tùy chọn: Tự chạy app bằng systemd</h2>
<pre class="bg-gray-100 p-4 rounded-md overflow-x-auto text-sm"><code># /etc/systemd/system/golang-app.service
[Unit]
Description=Golang Echo App
After=network.target

[Service]
ExecStart=/path/to/server
WorkingDirectory=/path/to/app
Restart=always
User=root

[Install]
WantedBy=multi-user.target</code></pre>

<pre class="bg-gray-100 p-4 rounded-md overflow-x-auto text-sm"><code>sudo systemctl daemon-reexec
sudo systemctl daemon-reload
sudo systemctl enable golang-app
sudo systemctl start golang-app</code></pre>

<hr class="my-6">

<h2 class="text-2xl font-semibold text-gray-800 mb-4">✅ Kiểm tra</h2>
<ul class="list-disc list-inside text-gray-700">
  <li>Truy cập <code>https://golang.vuvanviet.com</code></li>
  <li>App chạy bình thường và có biểu tượng ổ khóa xanh</li>
</ul>

<p class="mt-4">Chúc mừng! Bạn đã triển khai ứng dụng Golang với HTTPS đầy đủ và an toàn.</p>

{{ template "footer.html" . }}
